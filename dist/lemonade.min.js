function q(){function A(a,b){this.parent||(this.parent=this.parentNode);var d=this.parent,c=this.s||B;var e=this.u;var g=[];if(a.length)for(let f=0;f<a.length;f++){let k=a[f].I;k||(k=h.j(c,d,a[f],e),m(a[f],"parent",b));g.push(k)}for(;d.children[0];)d.children[0].remove();for(;e=g.shift();)d.appendChild(e)}function m(a,b,d){Object.defineProperty(a,b,{enumerable:!1,get:function(){return d}})}function v(a){var b=null,d=w.call(a);if(this.o){var c=a.tagName;c=c.charAt(0).toUpperCase()+c.slice(1).toLowerCase();
b=this.o[c];"function"==typeof b&&(a.s=b)}a.getAttribute("@loop")&&!b&&(b=!0,a.parent=a);b&&(a.self={},a.u=a.innerHTML,a.innerHTML="");b=Object.keys(d);if(b.length)for(c=0;c<b.length;c++)if(a.s||"on"!=b[c].substring(0,2)){var e=d[b[c]].replace("self.","");"@ready"==b[c]?(this.g.push(Function("self",d[b[c]]).bind(a,this.self)),a.removeAttribute(b[c])):"@ref"==b[c]?(this.self[e]=a.self?a.self:a,a.removeAttribute(b[c])):"@bind"==b[c]?(a.oninput=function(f,k){var r=this.state;if("function"===typeof f.m)var n=
f.m();else if("SELECT"==f.tagName&&f.getAttribute("multiple")){n=[];for(var p=0;p<f.options.length;p++)f.options[p].selected&&n.push(f.options[p].value)}else n="checkbox"==f.type?f.checked&&f.getAttribute("value")?f.value:f.checked:f.getAttribute("contenteditable")?f.innerHTML:f.value;r[k]=n;t.call(this,k)}.bind(this,a,e),u.call(this,a,{h:d[b[c]]},"value"),a[b[c]]=e,a.removeAttribute(b[c])):"@loop"==b[c]?(u.call(this,a,{h:d[b[c]]},"@loop"),a.loop=this.self[e],a.removeAttribute(b[c])):x.call(this,
a,b[c])}else{e=b[c].toLowerCase();var g=d[b[c]];a.removeAttribute(e);a[e]=Function("self",g).bind(a,this.self)}if(a.children.length){b=[];for(c=0;c<a.children.length;c++)b.push(a.children[c]);for(c=0;c<b.length;c++)v.call(this,b[c])}else a.textContent&&x.call(this,a,"textContent");d=a.s;"function"===typeof d&&("undefined"==typeof a.loop&&(c=a.parentNode,b=h.C.call(a.self,w.call(a,!0)),m(b,"parent",this.self),h.j(d,c,b,a.u,a,this.o)),a.remove())}function w(a){var b={},d=this.attributes;if(d&&d.length)for(var c=
0;c<d.length;c++){var e=d[c].name;b[e]=1==a&&"undefined"!==typeof this[e]?this[e]:d[c].value}return b}function x(a,b){function d(f,k,r){c.push({p:r-e,h:k});e+=f.length;return""}var c=[],e=0;a.getAttribute&&a.getAttribute(b)?a.setAttribute(b,a.getAttribute(b).replace(/{{(.*?)}}/g,d)):"string"==typeof a[b]&&a[b]&&(a[b]=a[b].replace(/{{(.*?)}}/g,d));if(c.length){1!=c.length||"textContent"!=b||a.innerText||(b="innerHTML");for(var g=c.length-1;0<=g;g--)u.call(this,a,c[g],b)}}function u(a,b,d){var c=eval(b.h);
"undefined"===typeof c&&(c="");if("textContent"==d){var e=document.createTextNode(c);a.childNodes[0]?a.insertBefore(e,a.childNodes[0].splitText(b.p)):a.appendChild(e)}else"@loop"==d?e=a:(e=a,y(a,c,d));if((a=b.h.match(/self\.([a-zA-Z0-9_].*?)*/g))&&a.length)for(c=0;c<a.length;c++){var g=a[c].replace("self.",""),f=!1,k=this.self[g];"undefined"===typeof k&&(k="");this.l[g]||(this.l[g]=[],f=!0);this.l[g].push({element:e,B:d,h:b.h});f&&C.call(this,g);this.self[g]=k}}function C(a){var b=this,d=!0;Object.defineProperty(this.self,
a,{set:function(c){b.state[a]=c;t.call(b,a,d);d=!1},get:function(){return b.state[a]},configurable:!0,enumerable:!0})}function t(a,b){var d,c;if(d=this.l[a]){var e=this.self;for(c=0;c<d.length;c++){var g=d[c].element;var f=eval(d[c].h);var k=d[c].B;"@loop"==k?A.call(g,f,e):g.self?g.self[k]=f:y(g,f,k)}b||"function"!=typeof e.onchange||e.onchange.call(g,a,d,e)}}function y(a,b,d){if("value"===d)if("function"===typeof a.m)a.m()!=b&&a.m(b);else if("SELECT"==a.tagName&&a.getAttribute("multiple"))for(d=
0;d<a.children.length;d++)a.children[d].selected=0<=b.indexOf(a.children[d].value);else"checkbox"==a.type?a.checked=b&&"0"!==b&&"false"!==b?!0:!1:"radio"==a.type?(a.checked=!1,a.value==b&&(a.checked=!0)):a.getAttribute("contenteditable")?a.innerHTML!=b&&(a.innerHTML=b):a.value=b;else"undefined"!==typeof a[d]||"function"==typeof b||"object"==typeof b?a[d]=b:a.setAttribute(d,b)}function z(a,b){var d,c;if(c=a.A){if(c.g)for(;d=c.g.shift();)l.g.push(d);"function"==typeof c.self.onload&&l.g.push(c.self.onload.bind(c.self,
a))}if(document.body.contains(b)&&l&&l.g&&l.g.length)for(;d=l.g.shift();)d()}function B(a){return h.element(a,this)}var l=null;document.v||(l=document.v={g:[],i:{}});var h={j:function(a,b,d,c,e,g){if(!(b instanceof Element||b instanceof HTMLDocument))return console.log("Not valid DOM"),!1;d||(d={});"function"==typeof a&&("function"===typeof a&&/^class\s/.test(Function.prototype.toString.call(a))?(a=new a(d),a=h.element(a.j(c,g),a)):a=a.call(d,c,g));if("ROOT"==a.tagName)for(;a.firstChild;)e?b.insertBefore(a.firstChild,
e):b.appendChild(a.firstChild);else e?b.insertBefore(a,e):b.appendChild(a);z(a,b);return a},element:function(a,b,d){var c={self:b||{},state:{},l:{},g:[]};d&&(c.o=d);if(a instanceof Element||a instanceof HTMLDocument)b=a;else{a=a.replace(/(<([A-Z]{1}[a-zA-Z0-9_-]+)[^>]*)(\/|\/.{1})>/gm,"$1></$2>");a=a.replace(/<>/gi,"<root>").replace(/<\/>/gi,"</root>").trim();b=document.createElement("template");b.innerHTML=a;b.content?b=b.content:(b=document.createElement("div"),b.innerHTML=a);if(1<b.childNodes.length){console.error("Single root required");
return}b=b.firstChild}v.call(c,b);m(c.self,"refresh",function(e){t.call(c,e)});m(c.self,"el",b);b.A=c;return b}};h.u=h.element;h.F=function(a,b,d){return h.j(h.element(a,b),d,b)};h.apply=function(a,b){h.element(a,b);z(a,a)};h.J=function(a){var b={},d;for(d in a)b[d]=this[d];return b};h.C=function(a){for(var b in a)this.hasOwnProperty(b),this[b]=a[b];return this};h.K=function(a){for(var b in a)this[b]=""};h.get=function(a){return l.i[a]};h.set=function(a,b,d){l.i[a]=b;"function"===typeof b&&!0===d&&
(l.i[a].storage=!0,a=window.localStorage.getItem(a))&&(a=JSON.parse(a),b(a))};h.H=function(a,b){var d=l.i[a];"function"===typeof d&&(d(b),!0===d.storage&&window.localStorage.setItem(a,JSON.stringify(b)))};h.G=class{constructor(){}};return h}"object"===typeof exports&&"undefined"!==typeof module?module.exports=q():"function"===typeof define&&define.D?define(q):q();
